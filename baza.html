<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

        const api_url = "https://apparent-scorpion-37.hasura.app/api/rest/Filmy"
        async function getMovies(){
            const response = await fetch(api_url);
            const data = await response.json();
            console.log(data);

        const tytuly = "https://apparent-scorpion-37.hasura.app/api/rest/tytulyonly";

async function getTitles() {
    const responseT = await fetch(tytuly);
    const dataT = await responseT.json();
    console.log(dataT);

    let choices = "";
    for (let i = 0; i < dataT.Filmy.length; i++) {
        choices += i + " - " + dataT.Filmy[i].Tytul + "\n";
      //  console.log("Wybierz swoj film:\n " + i + " - " + dataT.Filmy[i].Tytul);
    }

    document.getElementById("wyswietalnie").addEventListener("click", wyswietalnie);

    document.getElementById("dodawanie").addEventListener("click", dodawanie);
    document.getElementById("usuwanie").addEventListener("click", usuwanie);
    document.getElementById("edytowanie").addEventListener("click", edytowanie);

    function wyswietalnie(){
    const userInput = prompt("Wybor: " + choices);


    if (!isNaN(userInput) && userInput >= 0 && userInput < dataT.Filmy.length) {
        const selectedMovie = dataT.Filmy[userInput];
        document.write("<h1>Tytul wybranego filmu to: "+dataT.Filmy[userInput].Tytul+"</h1><hx>")
        document.write("<h2>Czas trwania: "+data.Filmy[userInput].Czas_trwania+" minut</h2><hx>")
        document.write("<h2>Gatunek: "+data.Filmy[userInput].Gatunek+"</h2><hx>")
        document.write("<h2>Rezyser: "+data.Filmy[userInput].Rezyser+"</h2><hx>")
        document.write("<h4>UUID: "+data.Filmy[userInput].ID+"</h4><hx>")

    } else {
        alert("Nieprawidłowy wybór.");
        location.reload();
    }
}

                function dodawanie() {
                    alert("Wywołanie dodawania działa!");
                }

                function usuwanie() {
                    alert("Wywołanie usuwania działa!");
                }

                function edytowanie() {
                    alert("Wywołanie edytowania działa!");
                }


}


getTitles();
    }
        getMovies();



    </script>

        <h1><button id="wyswietalnie">Wyswietlenie rekordow</button></h1>

        <button id="dodawanie">Dodawanie rekordów</button>
        <button id="usuwanie">Usuwanie rekordów</button>
        <button id="edytowanie">Edytowanie rekordów</button>
    

</body>
</html>